<ion-header>
  <ion-toolbar>
    <ion-title class="text-center text-gray-800"
      >Daftar Template Surat ðŸ“„</ion-title
    >
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="bg-gradient-to-br from-indigo-50 via-white to-purple-100 p-3">
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3">
      <div
        *ngFor="let surat of suratTemplates"
        class="bg-white rounded-lg shadow-md overflow-hidden flex flex-col h-full"
      >
        <!-- Preview Section -->
        <div
          class="relative h-32 bg-gray-50 flex items-center justify-center border-b"
        >
          <img
            [src]="'assets/templates/previews/' + surat.title.replace(' ', '_') + '_thumb.jpg'"
            class="object-cover h-full w-full opacity-75"
            onerror="this.src='assets/templates/preview-placeholder.jpg'"
            alt="Preview"
          />
          <div
            class="absolute top-0 right-0 bg-indigo-100 text-indigo-800 text-xs font-medium px-2 py-1 rounded-bl-lg"
          >
            {{ surat.category }}
          </div>
        </div>

        <!-- Title Section -->
        <div class="p-3">
          <h3 class="text-sm font-semibold text-indigo-700 truncate">
            {{ surat.title }}
          </h3>
        </div>

        <!-- Action Buttons -->
        <div class="flex justify-between p-2 pt-0 mt-auto">
          <ion-button
            size="small"
            fill="clear"
            color="primary"
            (click)="viewTemplate(surat)"
          >
            <ion-icon name="eye-outline" slot="start" size="small"></ion-icon>
            Lihat
          </ion-button>

          <div class="flex space-x-1">
            <a [href]="surat.fileWord" download>
              <ion-button size="small" fill="clear" color="tertiary">
                <ion-icon name="document-outline" size="small"></ion-icon>
              </ion-button>
            </a>
            <a [href]="surat.filePdf" download>
              <ion-button size="small" fill="clear" color="success">
                <ion-icon name="document-text-outline" size="small"></ion-icon>
              </ion-button>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Add padding at the bottom to prevent content being hidden by tabs -->
    <div class="h-16"></div>
  </div>
</ion-content>

<ion-tab-bar slot="bottom" class="bg-white border-t border-gray-100">
  <ion-tab-button
    tab="dashboard"
    routerLink="/dashboard"
    routerDirection="root"
    routerLinkActive="tab-selected"
    class="text-xs sm:text-sm"
  >
    <ion-icon
      name="grid-outline"
      class="text-base sm:text-lg md:text-xl"
    ></ion-icon>
    <ion-label>Dashboard</ion-label>
  </ion-tab-button>

  <ion-tab-button
    tab="aktivitas"
    routerLink="/aktivitas"
    routerDirection="root"
    routerLinkActive="tab-selected"
    class="text-xs sm:text-sm"
  >
    <ion-icon
      name="pulse-outline"
      class="text-base sm:text-lg md:text-xl"
    ></ion-icon>
    <ion-label>Aktivitas</ion-label>
  </ion-tab-button>

  <ion-tab-button
    tab="riwayat"
    routerLink="/riwayatsurat"
    routerDirection="root"
    routerLinkActive="tab-selected"
    class="text-xs sm:text-sm"
  >
    <ion-icon
      name="time-outline"
      class="text-base sm:text-lg md:text-xl"
    ></ion-icon>
    <ion-label>Riwayat</ion-label>
  </ion-tab-button>

  <ion-tab-button
    tab="profile"
    routerLink="/profile"
    routerDirection="root"
    routerLinkActive="tab-selected"
    class="text-xs sm:text-sm"
  >
    <ion-icon
      name="person-outline"
      class="text-base sm:text-lg md:text-xl"
    ></ion-icon>
    <ion-label>Profile</ion-label>
  </ion-tab-button>
</ion-tab-bar>
